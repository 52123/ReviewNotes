
## 如何制定性能调优标准

### 1. 为什么要做性能优化

> 好的系统性能调优不仅仅可以提高系统的性能，还能为公司节省资源

### 2. 什么时候开始介入调优

在项目开发的初期，我们没有必要过于在意性能优化，这样反而会让我们疲于性能优化，我们只需要在代码层面保证有效的编码，比如，减少磁盘 I/O 操作、降低竞争锁的使用以及使用高效的算法等等

***在系统编码完成之后，我们就可以对系统进行性能测试了***，根据产品经理提供的预期数据，进行压测，通过性能分析、统计工具来统计各项性能指标，看是否在预期范围之内

### 3. 有哪些参考因素可以体现系统的性能

先了解一下哪些计算机资源会成为系统的性能瓶颈

#### CPU
> 有的应用需要大量计算，他们会长时间、不间断地占用 CPU 资源，导致其他资源无法争夺到 CPU 而响应缓慢，从而带来系统性能问题<br>
例如，代码递归导致的无限循环，正则表达式引起的回溯，JVM 频繁的 FULL GC，以及多线程编程造成的大量上下文切换等，这些都有可能导致 CPU 资源繁忙

#### 内存
> Java堆内存的读写速度非常快，所以基本不存在读写性能瓶颈。但是由于内存成本要比磁盘高，相比磁盘，内存的存储空间又非常有限。所以当内存空间被占满，对象无法回收时，就会导致内存溢出、内存泄露等问题

#### 磁盘 I/O
>磁盘相比内存来说，存储空间要大很多，但磁盘 I/O 读写的速度要比内存慢，虽然目前引入的 SSD 固态硬盘已经有所优化，但仍然无法与内存的读写速度相提并论

#### 网络
> 网络带宽过低的话，对于传输数据比较大，或者是并发量比较大的系统，网络就很容易成为性能瓶颈

#### 异常
> Java 应用中，抛出异常需要构建异常栈，对异常进行捕获和处理，这个过程非常消耗系统性能。如果在高并发的情况下引发异常，持续地进行异常处理，那么系统的性能就会明显地受到影响

#### 数据库
> 大部分系统都会用到数据库，而数据库的操作往往是涉及到磁盘 I/O 的读写。大量的数据库读写操作，会导致磁盘 I/O 性能瓶颈，进而导致数据库操作的延迟性

#### 锁竞争
> 锁的使用可能会带来上下文切换，从而给系统带来性能开销。JDK1.6 之后，Java 为了降低锁竞争带来的上下文切换，对 JVM 内部锁已经做了多次优化。而如何合理地使用锁资源，优化锁资源，就需要了解更多的操作系统知识、Java 多线程编程基础，积累项目经验，并结合实际场景去处理相关问题

